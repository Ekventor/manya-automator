{"version":3,"sources":["components/GroupIcon.js","App.js","index.js"],"names":["GroupIcon","src","style","background","className","window","generalTop","App","useState","topIsLoaded","setTopStatus","params","location","search","replace","split","reduce","p","e","a","decodeURIComponent","fetch","response","json","addGroup","bridge","send","group","group_id","console","log","useEffect","getGeneralTop","then","result","catch","error","activeView","activePanel","id","centered","onClick","marginTop","marginBottom","size","map","mode","photo_50","marginLeft","href","type","name","members_count","render","document","getElementById"],"mappings":"ofAAaA,EAAY,SAAAC,GAEvB,OADAA,EAAMA,EAAIA,IAER,qBAAKC,MAAO,CAAEC,WAAW,OAAD,OAAUF,EAAV,oBAAmCG,UAAU,UCczEC,OAAOC,WAAa,KAiFLC,MA9Ef,WAAgB,IAAD,EAC2BC,mBAAS,eADpC,gCAEeA,mBAAS,OAFxB,gCAGwBA,oBAAS,IAHjC,mBAGLC,EAHK,KAGQC,EAHR,KAKTC,EAASN,OAAOO,SAASC,OAAOC,QAAQ,IAAK,IAAIC,MAAM,KAAKC,QAC9D,SAACC,EAAGC,GACF,IAAIC,EAAID,EAAEH,MAAM,KAEhB,OADAE,EAAEG,mBAAmBD,EAAE,KAAOC,mBAAmBD,EAAE,IAC5CF,IAET,IAXW,4CAwBb,4BAAAE,EAAA,sEACsBE,MAAM,2DAD5B,cACKC,EADL,gBAEYA,EAASC,OAFrB,oFAxBa,+BA6BEC,IA7BF,2EA6Bb,4BAAAL,EAAA,sEACmBM,IAAOC,KAAK,0BAD/B,cACKC,EADL,gBAEKN,MAAM,iEAAD,OAAkEM,EAAMC,WAFlF,4CA7Ba,sBAkCb,OApBAC,QAAQC,IAAInB,GAEZoB,qBAAU,YAhBG,2CAiBXC,GAAgBC,MAAK,SAAAC,GACtBL,QAAQC,IAAII,GACZ7B,OAAOC,WAAa4B,EACpBxB,GAAa,MACZyB,MAAMN,QAAQO,SACb,CAAC3B,IAYAA,EAEA,cAAC,IAAD,CAAM4B,WAAW,OAAjB,SACD,cAAC,IAAD,CAAMC,YAAY,MAAMC,GAAG,OAA3B,SACE,eAAC,IAAD,CAAOA,GAAG,MAAV,UACD,cAAC,IAAD,sHACH,cAAC,IAAD,CAAYC,UAAW,EAAOC,QAAUjB,EAAxC,2HACA,qBAAKpB,UAAU,oBAAoBF,MAAO,CAAEwC,UAAW,MAAOC,aAAc,OAA5E,SACK,cAAC,IAAD,CAAUC,KAAK,IAAIxC,UAAU,SAA7B,SAECC,OAAOC,WAAWuC,KAAI,SAAAlB,GACpB,OACD,cAAC,IAAD,CAAMmB,KAAK,SAAS1C,UAAU,QAA9B,SACD,eAAC,IAAD,CAAKA,UAAU,8BAAf,UACE,cAAC,EAAD,CAAWH,IAAM0B,EAAMoB,WAC1B,sBAAK7C,MAAO,CAAE8C,WAAY,OAA1B,UACQ,mBAAGC,KAAI,yBAAoC,SAAdtB,EAAMuB,KAAkB,OAAS,UAAvD,OAAoEvB,EAAMY,IAAjF,SAA2FZ,EAAMwB,OACpG,sCAAUxB,EAAMyB,uCAe1B,cAAC,IAAD,CAAMf,WAAW,OAAjB,SACE,cAAC,IAAD,CAAMC,YAAY,MAAMC,GAAG,OAA3B,SACE,eAAC,IAAD,CAAOA,GAAG,MAAV,UACD,cAAC,IAAD,sHACH,cAAC,IAAD,CAAYC,UAAW,EAAOC,QAAUjB,EAAxC,mIC5EHC,IAAOC,KAAK,eAAgB,IAE5B2B,iBAEC,cAAC,IAAD,UACK,cAAC,IAAD,UACE,cAAC,IAAD,UACJ,cAAC,EAAD,UAKFC,SAASC,eAAe,U","file":"static/js/main.7d5dfc42.chunk.js","sourcesContent":["export const GroupIcon = src => {\r\n  src = src.src;\r\n  return (\r\n    <div style={{ background: `url(${ src }) no-repeat 0 0` }} className=\"icon\"></div>\r\n  );\t\r\n};\r\n","import React, { useState, useEffect } from \"react\";\n\nimport {\n  Panel,\n  View,\n  Root,\n  PanelHeader,\n  CellButton,\n  CardGrid,\n  Card,\n  Div\n} from \"@vkontakte/vkui\";\n\nimport { GroupIcon } from \"./components/GroupIcon\";\n\nimport bridge from \"@vkontakte/vk-bridge\";\n\nwindow.generalTop = null\n\n\nfunction App() {\n  const [ activePanel, setActivePanel ] = useState(\"general-top\");\n  const [ token, setToken ] = useState(null);\n  const [ topIsLoaded, setTopStatus] = useState(false);\n  \n  let params = window.location.search.replace(\"?\", \"\").split(\"&\").reduce(\n    (p, e) => {\n      let a = e.split(\"=\");\n      p[decodeURIComponent(a[0])] = decodeURIComponent(a[1]);\n      return p;\n    },\n    {}\n  );\n\n  console.log(params);\n  \n  useEffect(() => {\n    getGeneralTop().then(result => {\n\t  console.log(result);\n\t  window.generalTop = result;\n\t  setTopStatus(true);\n\t}).catch(console.error);\n  }, [topIsLoaded]);\n  \n  async function getGeneralTop() {\n\tconst response = await fetch(\"https://KitKit.pythonanywhere.com?query=get_general_top\");\n\treturn await response.json();\n  }\n  \n  async function addGroup() {\n\tconst group = await bridge.send(\"VKWebAppAddToCommunity\");\n\tawait fetch(`https://KitKit.pythonanywhere.com?query=add_group&vk_group_id=${group.group_id}`);\n  }\n  \n  if (topIsLoaded) {\n    return (\n      <Root activeView=\"view\">\n\t    <View activePanel=\"top\" id=\"view\">\n\t      <Panel id=\"top\">\n\t\t    <PanelHeader>Маня автоматизатор</PanelHeader>\n\t\t\t<CellButton centered={ true } onClick={ addGroup }>Добавить сообщество</CellButton>\n\t\t\t<div className=\"horizontal-center\" style={{ marginTop: \"1em\", marginBottom: \"1em\" }}>\n\t\t      <CardGrid size=\"1\" className=\"groups\">\n\t\t        {\n\t\t\t   \t  window.generalTop.map(group => {\n\t\t\t        return (\n\t\t\t\t      <Card mode=\"shadow\" className=\"group\">\n\t\t\t\t\t    <Div className=\"group__info vertical-center\">\n\t\t\t\t\t   \t  <GroupIcon src={ group.photo_50 } />\n\t\t\t\t\t\t  <div style={{ marginLeft: \"1em\" }}>  \n\t\t\t\t            <a href={ `https://vk.com/${ group.type == \"group\" ? \"club\" : \"public\" }${ group.id }` }>{ group.name }</a>\n\t\t\t    \t\t    <span>: { group.members_count }</span>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t    </Div>\n\t\t\t\t      </Card>\n\t\t\t\t    )\n\t\t\t\t  })\n\t\t\t    }\n\t\t      </CardGrid>\n\t\t\t</div>\n\t\t  </Panel>\n\t    </View>\n\t  </Root>\n    );\n  } else {\n\treturn (\n\t  <Root activeView=\"view\">\n\t    <View activePanel=\"top\" id=\"view\">\n\t      <Panel id=\"top\">\n\t\t    <PanelHeader>Маня автоматизатор</PanelHeader>\n\t\t\t<CellButton centered={ true } onClick={ addGroup }>Добавить сообщество</CellButton>\n\t\t  </Panel>\n\t    </View>\n\t  </Root>\n\t);\n  }\n}\n\nexport default App;\n","import { render } from \"react-dom\";\nimport React from \"react\";\nimport \"core-js/features/map\";\nimport \"core-js/features/set\";\n\nimport \"@vkontakte/vkui/dist/vkui.css\";\nimport \"./App.css\";\nimport { ConfigProvider, AdaptivityProvider, AppRoot } from \"@vkontakte/vkui\";\nimport bridge from \"@vkontakte/vk-bridge\";\n\nimport \"./App.css\";\nimport App from \"./App\";\n\n\nbridge.send(\"VKWebAppInit\", {});\n\nrender(\n  (\n\t<ConfigProvider>\n      <AdaptivityProvider>\n        <AppRoot>\n\t\t  <App />\n\t\t</AppRoot>\n\t  </AdaptivityProvider>\n\t</ConfigProvider>\n  ),\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}